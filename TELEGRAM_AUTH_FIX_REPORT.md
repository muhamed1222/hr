# –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram WebApp –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 500 (Internal Server Error) –Ω–∞ endpoint `/api/auth/login`.

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/api/auth/login` —Å `telegram_id`, –Ω–æ —ç—Ç–æ—Ç endpoint –æ–∂–∏–¥–∞–µ—Ç `username` –∏ `password`
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π Telegram auth —Ä–æ—É—Ç**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç –¥–ª—è Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±—ã–ª —É–¥–∞–ª—ë–Ω –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
3. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**: –í –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –±—ã–ª–∏ –æ—à–∏–±–∫–∏ –≤ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–¥–µ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Telegram auth —Ä–æ—É—Ç
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `src/routes/telegram-auth.js` –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–¥–µ
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –ª–æ–≥–≥–µ—Ä–∞

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `telegramAuthRoutes` –≤ `src/app.js`
- –ü–æ–¥–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç –∫ `/api/auth` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- –ü–æ–¥–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç –∫ `/api/telegram-auth` –¥–ª—è –Ω–æ–≤–æ–≥–æ API

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –≤ `src/services/errors/index.js`
- –ò–∑–º–µ–Ω—ë–Ω —Å `{ _error }` –Ω–∞ `{ error: _error }`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **Telegram auth endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç**: `http://localhost:3000/api/auth/telegram-status`
‚úÖ **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints**:
- `POST /api/auth/telegram-login` - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `GET /api/auth/telegram-status` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞

## –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

### Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/telegram-login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp
- `GET /api/auth/telegram-status` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Telegram auth
- `POST /api/telegram-auth/telegram-login` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å
- `GET /api/telegram-auth/telegram-status` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å

### –û–±—ã—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ username/password
- `GET /api/auth/verify` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
- `POST /api/auth/change-password` - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Telegram auth
curl http://localhost:3000/api/auth/telegram-status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
curl http://localhost:3000/health
```

Telegram WebApp —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üöÄ 